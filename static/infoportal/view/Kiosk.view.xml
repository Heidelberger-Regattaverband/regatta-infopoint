<mvc:View controllerName="de.regatta_hd.infopoint.controller.Kiosk" xmlns="sap.m" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc"
  xmlns:layout="sap.ui.layout">
  <mvc:content>

    <Page title="Kiosk" class="sapUiNoContentPadding" showNavButton="true" navButtonPress="onNavBack">

      <headerContent>
        <Button tooltip="{i18n>common.refresh}" icon="sap-icon://refresh" press="onRefreshButtonPress" />
      </headerContent>

      <content>
        <!-- Finished heat -->
        <layout:VerticalLayout width="100%">
          <Title
            text="Ergebnis Lauf: {path: 'heats>/0/race', formatter: '.formatter.nrRaceLabel'}, {path: 'heats>/0/', formatter: '.formatter.heatLabel'}"
            wrapping="true" />
          <Label text="{heats>/0/race/longLabel} {heats>/0/race/comment}" />

          <layout:HorizontalLayout class="sapUiContentPadding">
            <ObjectAttribute title="{i18n>common.heatNr}" text="{heats>/0/number}" />
            <ObjectAttribute title="{i18n>common.day}" text="{path: 'heats>/0/date', formatter: '.formatter.dateLabel'}" />
            <ObjectAttribute title="{i18n>common.time}" text="{path: 'heats>/0/time', formatter: '.formatter.timeLabel'}" />
            <ObjectAttribute title="{i18n>common.distance}" text="{path: 'heats>/0/race', formatter: '.formatter.distanceLabel'}" />
            <ObjectAttribute title="{i18n>common.state}" text="{path: 'heats>/0/', formatter: '.formatter.stateLabel'}" />
            <ObjectAttribute title="{i18n>common.refereeAbr}" text="{heats>/0/referee/lastName}, {heats>/0/referee/firstName}"
              visible="{= ${heats>/0/referee/firstName} !== '' || ${heats>/0/referee/lastName} !== ''}" />
          </layout:HorizontalLayout>
        </layout:VerticalLayout>

        <Table autoPopinMode="true" growing="true" growingThreshold="50" growingScrollToLoad="true"
          sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" class="sapUiNoContentPadding"
          items="{path: 'finished>/', sorter: [{path: 'result/rankSort', descending: false}, {path: 'bib', descending: false} ]}">

          <columns>
            <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline" visible="{= ${heats>/0/state} >= 4 }">
              <header>
                <Text text="{i18n>common.rank}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline">
              <header>
                <Text text="{i18n>common.bib}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column width="12rem" importance="High" popinDisplay="Inline">
              <header>
                <Text text="{i18n>common.boat}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="3rem" importance="Low" popinDisplay="Inline">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.lane}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="End" width="4rem" importance="High" popinDisplay="Inline" visible="{= ${heats>/0/state} >= 4 }">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.result}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="End" width="4rem" importance="Low" popinDisplay="Inline" visible="{= ${heats>/0/state} >= 4 }">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.delta}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="4rem" importance="Low" popinDisplay="Inline" visible="{= ${heats>/0/state} >= 4 }">
              <header>
                <Text text="{i18n>common.points}" class="bold" wrapping="false" />
              </header>
            </Column>
          </columns>

          <items>
            <ColumnListItem vAlign="Top">
              <cells>
                <Text text="{finished>result/rankLabel}" />
                <Text text="{finished>registration/bib}" />
                <ObjectIdentifier
                  title="{parts: [{path:'finished>registration/shortLabel'},{path:'finished>registration/boatNumber'},{path:'finished>registration/comment'}],formatter: '.formatter.boatLabel'}"
                  text="{path: 'finished>registration/crew', formatter: '.formatter.crewLabel'} " />
                <Text text="{finished>lane}" />
                <Text text="{finished>result/result}" />
                <Text text="{= ${finished>result/delta} !== '0.0' ? ${finished>result/delta} : '-' }" />
                <Text text="{finished>result/points}" />
              </cells>
            </ColumnListItem>
          </items>
        </Table>

        <Toolbar></Toolbar>
        <!-- Next heat -->
        <layout:VerticalLayout>

          <Title
            text="NÃ¤chster Lauf: {path: 'heats>/1/race', formatter: '.formatter.nrRaceLabel'}, {path: 'heats>/1/', formatter: '.formatter.heatLabel'}"
            wrapping="true" />
          <Label text="{heats>/1/race/longLabel} {heats>/1/race/comment}" />

          <layout:HorizontalLayout class="sapUiContentPadding">
            <ObjectAttribute title="{i18n>common.heatNr}" text="{heats>/1/number}" />
            <ObjectAttribute title="{i18n>common.day}" text="{path: 'heats>/1/date', formatter: '.formatter.dateLabel'}" />
            <ObjectAttribute title="{i18n>common.time}" text="{path: 'heats>/1/time', formatter: '.formatter.timeLabel'}" />
            <ObjectAttribute title="{i18n>common.distance}" text="{path: 'heats>/1/race', formatter: '.formatter.distanceLabel'}" />
            <ObjectAttribute title="{i18n>common.state}" text="{path: 'heats>/1/', formatter: '.formatter.stateLabel'}" />
            <ObjectAttribute title="{i18n>common.refereeAbr}" text="{heats>/1/referee/lastName}, {heats>/1/referee/firstName}"
              visible="{= ${heats>/1/referee/firstName} !== '' || ${heats>/1/referee/lastName} !== ''}" />
          </layout:HorizontalLayout>
        </layout:VerticalLayout>

        <Table autoPopinMode="true" growing="true" growingThreshold="50" growingScrollToLoad="true"
          sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" class="sapUiNoContentPadding"
          items="{path: 'next>/', sorter: [{path: 'result/rankSort', descending: false}, {path: 'bib', descending: false} ]}">

          <columns>
            <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline" visible="{= ${heats>/1/state} >= 4 }">
              <header>
                <Text text="{i18n>common.rank}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline">
              <header>
                <Text text="{i18n>common.bib}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column width="12rem" importance="High" popinDisplay="Inline">
              <header>
                <Text text="{i18n>common.boat}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="3rem" importance="Low" popinDisplay="Inline">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.lane}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="End" width="4rem" importance="High" popinDisplay="Inline" visible="{= ${heats>/1/state} >= 4 }">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.result}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="End" width="4rem" importance="Low" popinDisplay="Inline" visible="{= ${heats>/1/state} >= 4 }">
              <header>
                <Text text="{i18n>heatRegistrationTable.column.delta}" class="bold" wrapping="false" />
              </header>
            </Column>
            <Column hAlign="Center" width="4rem" importance="Low" popinDisplay="Inline" visible="{= ${heats>/1/state} >= 4 }">
              <header>
                <Text text="{i18n>common.points}" class="bold" wrapping="false" />
              </header>
            </Column>
          </columns>

          <items>
            <ColumnListItem vAlign="Top">
              <cells>
                <Text text="{next>result/rankLabel}" />
                <Text text="{next>registration/bib}" />
                <ObjectIdentifier
                  title="{parts: [{path:'next>registration/shortLabel'},{path:'next>registration/boatNumber'},{path:'next>registration/comment'}],formatter: '.formatter.boatLabel'}"
                  text="{path: 'next>registration/crew', formatter: '.formatter.crewLabel'} " />
                <Text text="{next>lane}" />
                <Text text="{next>result/result}" />
                <Text text="{= ${next>result/delta} !== '0.0' ? ${next>result/delta} : '-' }" />
                <Text text="{next>result/points}" />
              </cells>
            </ColumnListItem>
          </items>
        </Table>

      </content>
    </Page>

  </mvc:content>
</mvc:View>