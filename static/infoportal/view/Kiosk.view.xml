<mvc:View controllerName="de.regatta_hd.infopoint.controller.Kiosk" xmlns="sap.m" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc"
  xmlns:layout="sap.ui.layout">
  <mvc:content>

    <Page title="Kiosk" class="sapUiNoContentPadding" showNavButton="true" navButtonPress="onNavBack">

      <headerContent>
        <Button tooltip="{i18n>common.refresh}" icon="sap-icon://refresh" press="onRefreshButtonPress" />
      </headerContent>

      <content>
        <layout:ResponsiveSplitter defaultPane="default">
          <layout:PaneContainer orientation="Vertical">
            <layout:SplitPane>

              <!-- Finished heat -->
              <Panel class="sapUiNoContentPadding">
                <layout:VerticalLayout width="100%">
                  <Title
                    text="Ergebnis Lauf: {path: 'heatFinished>/race', formatter: '.formatter.nrRaceLabel'}, {path: 'heatFinished>/', formatter: '.formatter.heatLabel'}" />
                  <Label text="{heatFinished>/race/longLabel} {heatFinished>/race/comment}" />
                </layout:VerticalLayout>

                <Table autoPopinMode="true" growing="true" growingThreshold="50" growingScrollToLoad="true"
                  sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" class="sapUiNoContentPadding"
                  items="{path: 'regsFinished>/', sorter: [{path: 'result/rankSort', descending: false}, {path: 'bib', descending: false} ]}">

                  <columns>
                    <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>common.rank}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>common.bib}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column width="12rem" importance="High" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>common.boat}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column hAlign="Center" width="3rem" importance="Low" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>heatRegistrationTable.column.lane}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column hAlign="End" width="4rem" importance="High" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>heatRegistrationTable.column.result}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column hAlign="End" width="4rem" importance="Low" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>heatRegistrationTable.column.delta}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                    <Column hAlign="Center" width="4rem" importance="Low" popinDisplay="Inline">
                      <header>
                        <Text text="{i18n>common.points}" class="bold" wrapping="false" />
                      </header>
                    </Column>
                  </columns>

                  <items>
                    <ColumnListItem vAlign="Top">
                      <cells>
                        <Text text="{regsFinished>result/rankLabel}" />
                        <Text text="{regsFinished>registration/bib}" />
                        <ObjectIdentifier
                          title="{path: 'regsFinished>registration',formatter: '.formatter.boatLabel'}"
                          text="{path: 'regsFinished>registration/crew', formatter: '.formatter.crewLabel'} " />
                        <Text text="{regsFinished>lane}" />
                        <Text text="{regsFinished>result/result}" />
                        <Text text="{= ${regsFinished>result/delta} !== '0.0' ? ${regsFinished>result/delta} : '-' }" />
                        <Text text="{regsFinished>result/points}" />
                      </cells>
                    </ColumnListItem>
                  </items>
                </Table>
              </Panel>
            </layout:SplitPane>

            <!-- Next heat -->
            <layout:SplitPane>
              <Panel class="sapUiNoContentPadding">
                <content>
                  <layout:VerticalLayout width="100%">
                    <Title
                      text="NÃ¤chster Lauf: {path: 'heatNext>/race', formatter: '.formatter.nrRaceLabel'}, {path: 'heatNext>/', formatter: '.formatter.heatLabel'}" />
                    <Label text="{heatNext>/race/longLabel} {heatNext>/race/comment}" />
                  </layout:VerticalLayout>

                  <Table autoPopinMode="true" growing="true" growingThreshold="50" growingScrollToLoad="true"
                    sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" class="sapUiNoContentPadding"
                    items="{path: 'regsNext>/', sorter: [{path: 'bib', descending: false}]}">

                    <columns>
                      <Column hAlign="Center" width="3rem" importance="High" popinDisplay="Inline">
                        <header>
                          <Text text="{i18n>common.bib}" class="bold" wrapping="false" />
                        </header>
                      </Column>
                      <Column width="12rem" importance="High" popinDisplay="Inline">
                        <header>
                          <Text text="{i18n>common.boat}" class="bold" wrapping="false" />
                        </header>
                      </Column>
                      <Column hAlign="Center" width="3rem" importance="Low" popinDisplay="Inline">
                        <header>
                          <Text text="{i18n>heatRegistrationTable.column.lane}" class="bold" wrapping="false" />
                        </header>
                      </Column>
                    </columns>

                    <items>
                      <ColumnListItem vAlign="Top">
                        <cells>
                          <Text text="{regsNext>registration/bib}" />
                          <ObjectIdentifier title="{path: 'regsNext>registration', formatter: '.formatter.boatLabel'}"
                            text="{path: 'regsNext>registration/crew', formatter: '.formatter.crewLabel'} " />
                          <Text text="{regsNext>lane}" />
                        </cells>
                      </ColumnListItem>
                    </items>
                  </Table>
                </content>
              </Panel>
            </layout:SplitPane>
          </layout:PaneContainer>
        </layout:ResponsiveSplitter>

      </content>
    </Page>

  </mvc:content>
</mvc:View>