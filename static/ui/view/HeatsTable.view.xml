<mvc:View controllerName="de.regatta_hd.infopoint.controller.HeatsTable" xmlns="sap.m" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc">

  <f:DynamicPage id="dynamicPageId" toggleHeaderOnTitleClick="false">
    <!-- DynamicPage Title -->
    <!-- <f:title>
      <f:DynamicPageTitle>
        <f:heading>
          <Title text="LÃ¤ufe" />
        </f:heading>
        <f:content>
          <OverflowToolbar>
            <ToolbarSpacer />
            <SearchField liveChange="onFilter">
              <layoutData>
                <OverflowToolbarLayoutData maxWidth="200px" shrinkable="true" priority="NeverOverflow" />
              </layoutData>
            </SearchField>
            <OverflowToolbarButton tooltip="Refresh" type="Transparent" text="Refresh" icon="sap-icon://refresh" press="onRefresh" />
          </OverflowToolbar>
        </f:content>
      </f:DynamicPageTitle>
    </f:title> -->
    <!-- <f:title>
      <f:DynamicPageTitle>
        <f:actions>
          <OverflowToolbarButton type="Transparent" icon="sap-icon://refresh" press="handleRefresh" tooltip="Refresh" />
        </f:actions>
      </f:DynamicPageTitle>
    </f:title> -->

    <!-- DynamicPage Content -->
    <f:content>
      <IconTabBar id="heatsIconTabBar" select=".onFilterSelect" class="sapUiResponsiveContentPadding">
        <items>
          <IconTabFilter text="{
            parts: [
              {path: 'regatta>/start_date'}
            ],
            formatter: '.formatter.dayLabel'
          }" key="{regatta>/start_date}" />
          <IconTabFilter text="{
            parts: [
              {path: 'regatta>/end_date'}
            ],
            formatter: '.formatter.dayLabel'
          }" key="{regatta>/end_date}" />
        </items>
        <content>
          <Table id="heatsTable" items="{heats>/}" inset="false" growing="true" growingScrollToLoad="true" growingThreshold="100" mode="SingleSelectMaster" selectionChange="onSelectionChange" sticky="ColumnHeaders">
            <columns>
              <Column hAlign="Center" width="3em">
                <Text text="{i18n>heatsTable.column.number}" class="bold" />
              </Column>
              <Column hAlign="Center" width="4em">
                <Text text="{i18n>heatsTable.column.date}" class="bold" />
              </Column>
              <Column hAlign="Center" width="4em">
                <Text text="{i18n>heatsTable.column.time}" class="bold" />
              </Column>
              <Column hAlign="Begin" width="8em">
                <Text text="{i18n>heatsTable.column.race}" class="bold" />
              </Column>
              <Column hAlign="Begin" width="8em">
                <Text text="{i18n>heatsTable.column.heat}" class="bold" />
              </Column>
              <Column hAlign="Center" width="6em">
                <Text text="{i18n>heatsTable.column.state}" class="bold" />
              </Column>
            </columns>

            <items>
              <ColumnListItem>
                <cells>
                  <Text text="{heats>number}" />
                  <Text text="{
                  parts: [
                    {path: 'heats>date'}
                  ],
                  formatter: '.formatter.dayLabel'
                }" />
                  <Text text="{
                  parts: [
                    {path: 'heats>time'}
                  ],
                  formatter: '.formatter.timeLabel'
                }" />
                  <Text text="{
                  parts: [
                    {path: 'heats>race_number'},
                    {path: 'heats>race_short_label'},
                    {path: 'heats>race_comment'}
                  ],
                  formatter: '.formatter.raceLabel'
                }" />
                  <Text text="{
                  parts: [
                    {path: 'heats>round_code'},
                    {path: 'heats>label'},
                    {path: 'heats>ac_num_sub_classes'},
                    {path: 'heats>group_value'}
                  ],
                  formatter: '.heatLabelFormatter.heatLabel'
                }" />
                  <Text text="{
                  parts: [
                    {path: 'heats>state'},
                    {path: 'heats>cancelled'}
                  ],
                  formatter: '.stateLabelFormatter.stateLabel'
                }" />
                </cells>
              </ColumnListItem>
            </items>
          </Table>
        </content>
      </IconTabBar>
    </f:content>

  </f:DynamicPage>
</mvc:View>